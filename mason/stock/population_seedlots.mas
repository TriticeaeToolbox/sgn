<%args>
$stock_id
</%args>

<& /util/import_javascript.mas, classes => [ 'jquery', 'jquery.dataTables', 'CXGN.BreedersToolbox.Accessions' ] &>
<& /util/import_css.mas, paths => ['/documents/inc/datatables/jquery.dataTables.css'] &>

<div style="overflow:scroll">
    <table class="table table-hover table-bordered" id="population_seedlots_table">
    </table>
</div>


<script>

jQuery(document).ready(function(){

    var population_id = "<%$stock_id%>";
    var table = jQuery(population_seedlots_table).DataTable({
        ajax: '/ajax/manage_accessions/population_seedlots/'+population_id,
        'autoWidth': false,
        destroy: true,
        columns: [
            { title: "Member Name", "data": null, "render": function ( data, type, row ) { return "<a href='/stock/"+row.member_id+"/view'>"+row.member_name+"</a>"; } },
            { title: "Seedlot Name", "data": null, "render": function ( data, type, row ) {
                if (row.seedlot_id === null){
                    return 'No Seedlot'
                } else {
                    return "<a href='/breeders/seedlot/"+row.seedlot_id+"'>"+row.seedlot_name+"</a>"
                }
            }},
            { title: "Current Count", "data": "current_count" },
            { title: "Current Weight (g) ", "data": "current_weight_gram" },
            { title: "Box Name", "data": "box_name" },
            { title: "Location", "data": "location" },
        ],
    });

});

</script>
